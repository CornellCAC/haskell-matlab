MCC=@MATLAB_MCC@
MCCFLAGS=@MCCFLAGS@

libhsmatlab.so: hsmatlab.m hsmatlab.c
	$(MCC) $(MCCFLAGS) -W lib:$(basename $@) -c hsmatlab.m
	[ -f $@ ] && mv $@ $@.post
	cat hsmatlab.c >> $(basename $@).c
	$(MCC) $(MCCFLAGS) -W none -T link:lib $(basename $@).c
	[ -f $@.post ] && cat $(basename $@).ctf >> $@

clean:
	rm -rf libhsmatlab_mcr
	rm -f libhsmatlab* mccExcludedFiles.log readme.txt
